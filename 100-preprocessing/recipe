# this recipe assumes that plurals.csv and new_phrases.txt have been updated to include the complete set of singular-plural pairs and ngrams to be tokenized respectively.  

python bin/comma_to_tab.py world-trans.csv > world-trans.tsv

## filter data, add bigrams, set the "Manager" field


# n-grammed and plural version

perl -w bin/process.pl ../place_docs_here/values-cleaned.tsv > ../place_docs_here/values-managers-bigrams.tsv
perl -w bin/process_world.pl ../place_docs_here/reloaded_world.tsv > ../place_docs_here/world-temp/processed.txt

perl -w bin/dedupe_world.pl ../place_docs_here/world-temp/processed.txt > world-temp/deduped.txt
perl -w bin/write_overlaps.pl ../place_docs_here/world-temp/deduped.txt > world-temp/10gram_sequences.txt
perl -w bin/delete_overlaps.pl ../place_docs_here/world-temp/10gram_sequences.txt ../place_docs_here/world-temp/deduped.txt > ../place_docs_here/world-manager-bigrams_new.tsv


# no ngrams version

perl -w bin/process.pl ../place_docs_here/values-cleaned.tsv > ../place_docs_here/values-managers-bigrams.tsv
perl -w bin/process_world_no_ngrams.pl ../place_docs_here/reloaded_world.tsv > ../place_docs_here/world-temp/processed_nongrams.txt

perl -w bin/dedupe_world.pl ../place_docs_here/world-temp/processed_nongrams.txt > world-temp/deduped_nongrams.txt
perl -w bin/write_overlaps.pl ../place_docs_here/world-temp/deduped_nongrams.txt > ../place_docs_here/world-temp/10gram_sequences_nongrams.txt
perl -w bin/delete_overlaps.pl ../place_docs_here/world-temp/10gram_sequences_nongrams.txt ../place_docs_here/world-temp/deduped_nongrams.txt > ../place_docs_here/nongrams-world-manager-bigrams.tsv